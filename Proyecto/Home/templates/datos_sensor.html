<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Datos Sensores - EIAROB</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='datos_sensor.css') }}">
</head>
<body>
<header class="main-header">
    <nav class="navbar">
        <div class="nav-left">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo EIAROB" class="logo" />
        </div>
        <div class="nav-center">
            <form method="post" action="{{ url_for('datos_sensor') }}">
                <select name="usuario" required>
                    <option value="" disabled selected>Selecciona un usuario</option>
                    {% for user in usuarios %}
                    <option value="{{ user['usuario'] }}">{{ user['usuario'] }}</option>
                    {% endfor %}
                </select>
                <button type="submit">Cargar datos</button>
            </form>
        </div>
        <div class="nav-right">
            <span style="margin-right:10px; color:white;">{{ usuario }}</span>
            <a href="{{ url_for('logout') }}" style="color:white;">Salir</a>
        </div>
    </nav>
</header>

<main class="container-row">
    {% if user_info %}
    <section class="left-section">
        <img src="{{ user_info['foto_perfil'] if user_info['foto_perfil'] else url_for('static', filename='images/perfil_default.jpg') }}" alt="Foto perfil" class="foto-perfil" />
        <h2>{{ user_info['nombre'] }}</h2>
        <ul>
            <li><strong>Usuario:</strong> {{ user_info['usuario'] }}</li>
            <li><strong>Fecha nacimiento:</strong> {{ user_info['fecha_nacimiento'] }}</li>
            <li><strong>Dirección:</strong> {{ user_info['direccion'] }}</li>
            <li><strong>Patologías:</strong> {{ user_info['patologias'] }}</li>
        </ul>
    </section>
    {% endif %}

    <section class="right-section">
        <h2>Datos de sensores</h2>
        <table class="tabla-sensores">
            <thead>
            <tr>
                <th>Nombre</th>
                <th>Estancia</th>
                <th>Último dato</th>
                <th>Fecha y hora</th>
                <th>Batería</th>
            </tr>
            </thead>
            <tbody>
            {% for sensor in sensores %}
            <tr>
                <td>{{ sensor.nombre }}</td>
                <td>{{ sensor.estancia }}</td>
                <td>{{ sensor.ultimo_dato }}</td>
                <td>{{ sensor.fecha_hora }}</td>
                <td>{{ sensor.bateria }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </section>
</main>
</body>
</html>
