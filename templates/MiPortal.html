<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>MiPortal</title>
    <link rel="stylesheet" href="../static/css/MiPortal.css" />
</head>
<body>
<header class="main-header" id="movible-header">
    <div class="nav-left">
        <a href="{{ url_for('root') }}">
            <img src="../static/img/logo_casa.png" alt="Logo_Casa" class="Logo_Casa" />
        </a>
    </div>

    <div class="nav-center">
        <img src="../static/img/img.png" alt="Logo Fundación" class="logo" />
    </div>

    <div class="nav-right">
        <img src="../static/img/img_1.png" alt="Foto perfil" />
        <div class="dropdown">
            <span>{{ usuario or "Nombre Usuario" }}</span>
            <div class="dropdown-content">
                <a href="{{ url_for('logout') }}">Cerrar sesión</a>
            </div>
        </div>
    </div>
</header>
<main>
    <!-- Columna principal (menú) -->
    <aside id="menu-principal">
        <nav>
            <button class="menu-btn" data-section="trabajador">Administrar trabajador</button>
            <button class="menu-btn" data-section="clientes">Administrar clientes</button>
            <button class="menu-btn" data-section="hogares">Administrar hogares</button>
        </nav>
    </aside>

    <!-- Columna secundaria -->
    <div id="columna-secundaria"></div>

    <!-- Contenido general -->
    <section id="contenido-principal"></section>
</main>
<script>
    const secundaria = document.getElementById('columna-secundaria');
    const contenidoPrincipal = document.getElementById('contenido-principal');

    // Datos simulados para cada tipo
    const listaGestores = ['Juan Pérez', 'María López', 'Carlos Sánchez', 'Ana Gómez'];
    const listaCuidadores = ['Carmen Díaz', 'Javier Ruiz', 'Laura Torres', 'Miguel Ángel'];
    const listaClientes = [
        { nombre: "Luis Martínez", dni: "12345678A" },
        { nombre: "Laura Gómez", dni: "23456789B" },
        { nombre: "Pedro Sánchez", dni: "34567890C" },
        { nombre: "María Fernández", dni: "45678901D" }
    ];
    const listaHogares = [
        { direccion: "Calle Falsa 123", codigo: "28080" },
        { direccion: "Av. Siempre Viva 742", codigo: "28081" },
        { direccion: "Plaza Mayor 1", codigo: "28082" }
    ];

    const opcionesSecundarias = {
        trabajador:
            `<div class="subopcion" data-subtipo="gestor">Gestor</div>
             <div class="subopcion" data-subtipo="cuidador">Cuidador</div>`,
        clientes:
            `<div class="subopcion" data-subtipo="cliente">Clientes</div>`,
        hogares:
            `<div class="subopcion" data-subtipo="hogares">Hogares</div>`
    };

    const accionesContenido = {
        gestor:
            `<div class="gestor-layout">
                <div class="opciones-gestor">
                    <ul>
                        <li id="btn-anadir-gestor">Añadir gestor</li>
                        <li id="btn-modificar-gestor">Modificar gestor</li>
                        <li id="btn-eliminar-gestor">Eliminar gestor</li>
                    </ul>
                </div>
                <div id="formulario-gestor-container"></div>
            </div>`,
        cuidador:
            `<div class="gestor-layout">
                <div class="opciones-gestor">
                    <ul>
                        <li id="btn-anadir-cuidador">Añadir cuidador</li>
                        <li id="btn-modificar-cuidador">Modificar cuidador</li>
                        <li id="btn-eliminar-cuidador">Eliminar cuidador</li>
                        <li>Horario</li>
                    </ul>
                </div>
                <div id="formulario-gestor-container"></div>
            </div>`,
        cliente:
            `<div class="gestor-layout">
                <div class="opciones-gestor">
                    <ul>
                        <li id="btn-anadir-cliente">Añadir cliente</li>
                        <li id="btn-modificar-cliente">Modificar cliente</li>
                        <li id="btn-eliminar-cliente">Eliminar cliente</li>
                    </ul>
                </div>
                <div id="formulario-gestor-container"></div>
            </div>`,
        hogares:
            `<div class="gestor-layout">
                <div class="opciones-gestor">
                    <ul>
                        <li id="btn-anadir-hogar">Añadir hogares</li>
                        <li id="btn-modificar-hogar">Modificar hogares</li>
                        <li id="btn-eliminar-hogar">Eliminar hogares</li>
                    </ul>
                </div>
                <div id="formulario-gestor-container"></div>
            </div>`
    };

    document.querySelectorAll('.menu-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const section = btn.dataset.section;
            secundaria.innerHTML = opcionesSecundarias[section];
            secundaria.style.display = 'block';
            contenidoPrincipal.innerHTML = '';
            activarSubopciones();
        });
    });

    function activarSubopciones() {
        document.querySelectorAll('.subopcion').forEach(item => {
            item.addEventListener('click', () => {
                const subtipo = item.dataset.subtipo;
                contenidoPrincipal.innerHTML = accionesContenido[subtipo];
                if (subtipo === 'cuidador') {
                    activarOpcionesCuidador();
                } else if (subtipo === 'gestor') {
                    activarOpcionesGestor();
                } else if (subtipo === 'cliente') {
                    activarOpcionesCliente();
                } else if (subtipo === 'hogares') {
                    activarOpcionesHogar();
                }
            });
        });
    }

    function activarOpcionesGestor() {
        const listaOpciones = document.querySelectorAll('.opciones-gestor li');
        const formularioContenedor = document.getElementById('formulario-gestor-container');

        listaOpciones.forEach(opcion => {
            opcion.addEventListener('click', () => {
                switch(opcion.id) {
                    case 'btn-anadir-gestor':
                        formularioContenedor.innerHTML =
                            `<form class="formulario una-columna">
                                <div class="campo-obligatorio-texto"><span>*</span> Campo obligatorio</div>
                                <label>Nombre <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Primer apellido <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Segundo apellido <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Nombre de usuario <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Contraseña <span style="color: red">*</span>
                                    <input type="password" required>
                                </label>
                                <button type="submit">Guardar</button>
                            </form>`;
                        break;
                    case 'btn-modificar-gestor':
                        formularioContenedor.innerHTML = `<p>Función modificar gestor no implementada aún.</p>`;
                        break;
                    case 'btn-eliminar-gestor':
                        formularioContenedor.innerHTML = '';
                        break;
                }
            });
        });
    }

    function activarOpcionesCuidador() {
        const listaOpciones = document.querySelectorAll('.opciones-gestor li');
        const formularioContenedor = document.getElementById('formulario-gestor-container');

        listaOpciones.forEach(opcion => {
            opcion.addEventListener('click', () => {
                switch(opcion.id) {
                    case 'btn-anadir-cuidador':
                        formularioContenedor.innerHTML =
                            `<form class="formulario una-columna">
                                <div class="campo-obligatorio-texto"><span>*</span> Campo obligatorio</div>
                                <label>Nombre <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Primer apellido <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Segundo apellido <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Nombre de usuario <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Contraseña <span style="color: red">*</span>
                                    <input type="password" required>
                                </label>
                                <label>Teléfono
                                    <input type="tel" maxlength="15">
                                </label>
                                <button type="submit">Guardar</button>
                            </form>`;
                        break;
                    case 'btn-modificar-cuidador':
                        formularioContenedor.innerHTML = `<p>Función modificar cuidador no implementada aún.</p>`;
                        break;
                    case 'btn-eliminar-cuidador':
                        formularioContenedor.innerHTML = '';
                        break;
                }
            });
        });
    }

    function activarOpcionesCliente() {
        const listaOpciones = document.querySelectorAll('.opciones-gestor li');
        const formularioContenedor = document.getElementById('formulario-gestor-container');

        listaOpciones.forEach(opcion => {
            opcion.addEventListener('click', () => {
                switch(opcion.id) {
                    case 'btn-anadir-cliente':
                        formularioContenedor.innerHTML =
                            `<form class="formulario dos-columnas">
                                <div class="campo-obligatorio-texto"><span>*</span> Campo obligatorio</div>
                                <label>Nombre <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>DNI <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Primer apellido <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Segundo apellido
                                    <input type="text">
                                </label>
                                <label>Fecha nacimiento
                                    <input type="date">
                                </label>
                                <label>Teléfono personal
                                    <input type="tel" maxlength="15">
                                </label>
                                <label>Teléfono familiar
                                    <input type="tel" maxlength="15">
                                </label>
                                <label>Correo electrónico
                                    <input type="email">
                                </label>
                                <label>Dirección
                                    <input type="text">
                                </label>
                                <label>Observaciones
                                    <textarea></textarea>
                                </label>
                                <label>Gestor <span style="color: red">*</span>
                                    <input type="text" class="campo-gestor-buscador" placeholder="Buscar gestor...">
                                </label>
                                <button type="submit">Guardar</button>
                            </form>`;
                        break;
                    case 'btn-modificar-cliente':
                        formularioContenedor.innerHTML = `<p>Función modificar cliente no implementada aún.</p>`;
                        break;
                    case 'btn-eliminar-cliente':
                        formularioContenedor.innerHTML = '';
                        break;
                }
            });
        });
    }

    function activarOpcionesHogar() {
        const listaOpciones = document.querySelectorAll('.opciones-gestor li');
        const formularioContenedor = document.getElementById('formulario-gestor-container');

        listaOpciones.forEach(opcion => {
            opcion.addEventListener('click', () => {
                switch(opcion.id) {
                    case 'btn-anadir-hogar':
                        formularioContenedor.innerHTML =
                            `<form class="formulario una-columna">
                                <div class="campo-obligatorio-texto"><span>*</span> Campo obligatorio</div>
                                <label>Dirección <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Código postal <span style="color: red">*</span>
                                    <input type="text" required>
                                </label>
                                <label>Provincia
                                    <input type="text">
                                </label>
                                <label>URL
                                    <input type="url">
                                </label>
                                <label>Token
                                    <input type="text">
                                </label>
                                <button type="submit">Guardar</button>
                            </form>`;
                        break;
                    case 'btn-modificar-hogar':
                        formularioContenedor.innerHTML = `<p>Función modificar hogar no implementada aún.</p>`;
                        break;
                    case 'btn-eliminar-hogar':
                        formularioContenedor.innerHTML = '';
                        break;
                }
            });
        });
    }

</script>
</body>
</html>
